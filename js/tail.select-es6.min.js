/* pytesNET/tail.select @ 0.5.5 Â© SamBrishes | pytesNET */
var{select,options}=function(f){function g(C,D){let E=n.createElement(C);return E.className=D&&D.join?D.join(" "):D||"",E}let n=f.document;const o="querySelector",p="querySelectorAll",q="parentElement",t="hasAttribute",x="getAttribute",y="setAttribute",z="removeAttribute";let B,A=function(C,D){if(C="string"==typeof C?n[p](C):C,C instanceof NodeList||C instanceof HTMLCollection||C instanceof Array)return Array.prototype.map.call(C,H=>{return new A(H,Object.assign({},D))});if(!(C instanceof Element)||!(this instanceof A))return!!(C instanceof Element)&&new A(C,D);if(A.inst[C[x]("data-tail-select")])return A.inst[C[x]("data-tail-select")];if(C[x]("data-select")){let H=JSON.parse(C[x]("data-select").replace(/\'/g,"\""));D=H instanceof Object?Object.assign(D,H):D}let E=C[x]("placeholder")||C[x]("data-placeholder"),F="bindSourceSelect",G="sourceHide";return D="object"==typeof D?D:{},D.multiple="multiple"in D?D.multiple:C.multiple,D.disabled="disabled"in D?D.disabled:C.disabled,D.placeholder=E||D.placeholder||null,D.width="auto"===D.width?C.offsetWidth+50:D.width,D.sourceBind=F in D?D[F]:D.sourceBind||!1,D.sourceHide=G in D?D[G]:D.sourceHide||!0,D.multiLimit=0<=D.multiLimit?D.multiLimit:Infinity,this.e=C,this.id=++A.count,this.con=Object.assign({},A.defaults,D),this.events={},A.inst["tail-"+this.id]=this,this.init().bind()};return A.version="0.5.5",A.status="dev",A.count=0,A.inst={},A.defaults={animate:!0,classNames:null,csvOutput:!1,csvSeparator:",",descriptions:!1,deselect:!1,disabled:!1,height:350,hideDisabled:!1,hideSelected:!1,items:{},locale:"en",multiple:!1,multiLimit:Infinity,multiPinSelected:!1,multiContainer:!1,multiShowCount:!0,multiShowLimit:!1,multiSelectAll:!1,multiSelectGroup:!0,openAbove:null,placeholder:null,search:!1,searchFocus:!0,searchMarked:!0,sortItems:!1,sortGroups:!1,sourceBind:!1,sourceHide:!0,startOpen:!1,stayOpen:!1,width:null,cbComplete:void 0,cbEmpty:void 0,cbLoopItem:void 0,cbLoopGroup:void 0},A.strings={de:{all:"Alle",none:"Keine",actionAll:"Alle ausw\xE4hlen",actionNone:"Alle abw\xE4hlen",empty:"Keine Optionen verf\xFCgbar",emptySearch:"Keine Optionen gefunden",limit:"Keine weiteren Optionen w\xE4hlbar",placeholder:"W\xE4hle eine Option...",placeholderMulti:"W\xE4hle bis zu :limit Optionen...",search:"Tippen zum suchen",disabled:"Dieses Feld ist deaktiviert"},en:{all:"All",none:"None",actionAll:"Select All",actionNone:"Unselect All",empty:"No Options available",emptySearch:"No Options found",limit:"You can't select more Options",placeholder:"Select an Option...",placeholderMulti:"Select up to :limit Options...",search:"Type in to search...",disabled:"This Field is disabled"},fr:{all:"Tous",none:"Aucun",actionAll:"S\xE9lectionner tout",actionNone:"S\xE9lectionner aucun",empty:"Aucune option disponible",emptySearch:"Aucune option trouv\xE9e",limit:"Aucune autre option s\xE9lectionnable",placeholder:"Choisissez une option ...",placeholderMulti:"Choisissez jusqu'\xE0 :limit option(s) ...",search:"Rechercher ...",disabled:"Ce champs est d\xE9sactiv\xE9"},modify(C,D,E){if(!(C in this))return!1;if(D instanceof Object)for(var F in D)this.modify(C,F,D[F]);else this[C][D]="string"==typeof E?E:this[C][D];return!0},register(C,D){return"string"==typeof C&&D instanceof Object&&(this[C]=D,!0)}},A.prototype={init(){let C=["tail-select"],D=this.con,E=/^[0-9.]+(?:cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|\%)$/i;return this.__=A.strings[D.locale]||A.strings.en,this._init=!0,this._query=!1,C=C.concat(!0===D.classNames?this.e.className:D.classNames),D.hideSelected&&C.push("hide-selected"),D.hideDisabled&&C.push("hide-disabled"),0==D.multiLimit&&C.push("disabled"),D.multiple&&C.push("multiple"),D.deselect&&C.push("deselect"),D.disabled&&C.push("disabled"),this.select=g("DIV",C),D.width&&E.test(D.width)?this.select.style.width=D.width:D.width&&!isNaN(parseFloat(D.width,10))&&(this.select.style.width=D.width+"px"),this.label=g("DIV","select-label"),this.label.addEventListener("click",()=>{this.toggle()}),this.select.appendChild(this.label),this.dropdown=g("DIV","select-dropdown"),isNaN(parseInt(D.height,10))||(this.dropdown.style.maxHeight=parseInt(D.height,10)+"px"),D.search&&(this.search=g("DIV","dropdown-search"),this.search.innerHTML=`<input type="text" class="search-input" placeholder="${this.__.search}" />`,this.search.children[0].addEventListener("input",F=>{this.query(2<F.target.value.length?F.target.value:void 0)}),this.dropdown.appendChild(this.search)),this.select.appendChild(this.dropdown),this.csvInput=g("INPUT","select-search"),this.csvInput.type="hidden",D.csvOutput&&(this.csvInput.name=this.e.name,this.e[z]("name"),this.select.appendChild(this.csvInput)),D.multiple&&D.multiContainer&&(n[o](D.multiContainer)?(this.container=n[o](D.multiContainer),this.container.classList.add("tail-select-container")):!0===D.multiContainer&&(this.container=this.label,this.container.classList.add("tail-select-container"))),this.options=new B(this.e,this),Array.prototype.map.call(this.e.options,F=>{this.options.set(F,!1)}),Object.keys(D.items).forEach(F=>{let G=D.items[F].join?D.items[F]:{value:D.items[F]},{value:H,group:I,selected:J,disabled:K,description:L}=G;this.options.add(D.items[F].key||F,H,I,J,K,L)}),this.query(),this.e.nextElementSibling?this.e[q].insertBefore(this.select,this.e.nextElementSibling):this.e[q].appendChild(this.select),D.sourceHide&&("none"==this.e.style.display?(this.select.style.display="none",this.e.setAttribute("data-select-hidden","display")):"hidden"==this.e.style.visibility?(this.select.style.visibiltiy="hidden",this.e.setAttribute("data-select-hidden","visibility")):(this.e.style.display="none",this.e.setAttribute("data-select-hidden","0"))),this._init=!1,this.e[y]("data-tail-select","tail-"+this.id),(D.cbComplete||function(){}).call(this,this.select),D.startOpen?this.open(this.con.animate):this},bind(){return(n.addEventListener("keydown",C=>{let E,F,G,H,D=C.keyCode||C.which;if(!this.select.classList.contains("active")||0>[13,27,38,40].indexOf(D))return!1;if(C.preventDefault(),C.stopPropagation(),13==D&&(E=this.dropdown[o](".dropdown-option.hover:not(.disabled)"))&&this.options.select(E),27==D||13==D)return this.close(this.con.animate);if(E=this.dropdown[o](".dropdown-option.hover:not(.disabled)")){E.classList.remove("hover"),G=[(40==D?"next":"previous")+"ElementSibling"];do{if(E=null!==(H=E[G])&&"LI"==E.tagName?H:null!==(H=E[q][G])&&0<H.children.length&&"UL"==H.tagName&&H.children[40==D?0:H.children.length-1],E&&(!/dropdown-option/.test(E.className)||/disabled/.test(E.className)))continue;break}while(!0)}if(E||40!=D?!E&&38==D&&(E=this.dropdown[o]("ul:last-child li:not(.disabled):last-child")):E=this.dropdown[o](".dropdown-option:not(.disabled)"),E&&(F=this.dropdown[o](".dropdown-inner"))){let I=function(J){let K={top:J.offsetTop,height:J.offsetHeight};for(;(J=J[q])!=F;)K.top+=J.offsetTop;return K}(E);E.classList.add("hover"),I.top+2*I.height>F.offsetHeight+F.scrollTop?F.scrollBy(0,I.top+2*I.height-(F.offsetHeight+F.scrollTop)):I.top-I.height<F.scrollTop&&F.scrollBy(0,-Math.abs(F.scrollTop-I.top+I.height))}return!0}),n.addEventListener("click",C=>{let D=!this.select.classList.contains("active")||this.select.classList.contains("idle");if(D||this.con.stayOpen)return!1;let E=[this.e,this.select,this.container].filter(F=>{return F&&(F.contains(C.target)||F==C.target)});return 0==E.length&&this.close(this.con.animate)}),!!!this.con.sourceBind)||(this.e.addEventListener("change",()=>{if(void 0!=event.detail)return!1;if(event.preventDefault(),event.stopPropagation(),!this.multiple&&this.selectedIndex)this.options.select(this.e.options[this.selectedIndex]);else{var D=[].concat(self.options.selected),E=Array.from(this.e[p]("option:checked")).filter(F=>{return!(0<=D.indexOf(F))||(D.splice(D.indexOf(F),1),!1)});this.options.walk("unselect",D),this.options.walk("select",E)}}),!0)},callback(C,D,E){let F=this,G=`[data-key='${C.key}'][data-group='${C.group}']`;if("rebuild"==D)return this.query();let H=this.dropdown[o](G);return H&&0<=["select","disable"].indexOf(D)?H.classList.add("select"==D?"selected":"disabled"):H&&0<=["unselect","enable"].indexOf(D)&&H.classList.remove("unselect"==D?"selected":"disabled"),this.update(C),!!E||this.trigger("change",C,D)},trigger(C){if(this._init)return!1;let D={bubbles:!1,cancelable:!0,detail:{args:arguments,self:this}};"change"==C&&arguments[2]&&0<=arguments[2].indexOf("select")&&(this.e.dispatchEvent(new CustomEvent("input",D)),this.e.dispatchEvent(new CustomEvent("change",D))),this.select.dispatchEvent(new CustomEvent("tail::"+C,D));let F,E=[...arguments];return E.shift(),(this.events[C]||[]).forEach(G=>{F=[].concat(E),F.push(G.args||null),(G.cb||function(){}).apply(this,F)}),!0},calc(){let C=this.dropdown.cloneNode(!0),D=this.con.height,E=0,F=this.dropdown[o](".dropdown-inner");C=this.dropdown.cloneNode(!0),C.style.cssText="height:auto;min-height:auto;max-height:none;opacity:0;display:block;visibility:hidden;",C.style.maxHeight=this.con.height+"px",C.className+=" cloned",this.dropdown[q].appendChild(C),D=D>C.clientHeight?C.clientHeight:D,this.con.search&&(E=C[o](".dropdown-search").clientHeight),this.dropdown[q].removeChild(C);let G=this.select.getBoundingClientRect(),H=f.innerHeight-(G.top+G.height),I=!!(D+E>H)&&G.top>H;return!0===this.con.openAbove||!1!==this.con.openAbove&&I?(I=!0,D=Math.min(D,G.top-10),this.select.classList.add("open-top")):(I=!1,D=Math.min(D,H-10),this.select.classList.remove("open-top")),F&&(this.dropdown.style.maxHeight=D+"px",F.style.maxHeight=D-E+"px"),this},query(C,D){let F,G,H,I,E=g("DIV","dropdown-inner"),J=C?"finder":"walker",K=this.con,L=C?[C,D]:[K.sortItems,K.sortGroups];this._query="string"==typeof C&&C;for(let O of this.options[J].apply(this.options,L)){if(!G||G&&G[x]("data-group")!==O.group)if(F=(K.cbLoopGroup||this.cbGroup).call(this,O.group,C,E),F instanceof Element)G=F,G[y]("data-group",O.group),E.appendChild(G);else break;let P=(K.cbLoopItem||this.cbItem).call(this,O,G,C,E);if(null!==P){if(!1===P)break;P[y]("data-key",O.key),P[y]("data-group",O.group),P.addEventListener("click",()=>{return!!P[x]("data-key")&&void(this.options.toggle(P[x]("data-key"),P[x]("data-group"))&&!K.stayOpen&&!K.multiple&&this.close(this.con.animate))}),G.appendChild(P)}}let M=E[p]("*[data-key]").length;if(0==M&&(this.con.cbEmpty||function(O){let P=g("SPAN","dropdown-empty");P.innerText=this.__.empty,O.appendChild(P)}).call(this,E,C),0<M&&K.multiple&&K.multiLimit==Infinity&&K.multiSelectAll){H=g("BUTTON","tail-all"),I=g("BUTTON","tail-none"),H.innerText=this.__.actionAll,H.addEventListener("click",P=>{P.preventDefault(),this.options.walk("select",this.dropdown.querySelectorAll(".dropdown-inner .dropdown-option"))}),I.innerText=this.__.actionNone,I.addEventListener("click",P=>{P.preventDefault(),this.options.walk("unselect",this.dropdown.querySelectorAll(".dropdown-inner .dropdown-option"))});let O=g("SPAN","dropdown-action");O.appendChild(H),O.appendChild(I),E.insertBefore(O,E.children[0])}let N=this.dropdown[o](".dropdown-inner");return this.dropdown[(N?"replace":"append")+"Child"](E,N),this.select.classList.contains("active")&&this.calc(),this.updateCSV().updateLabel()},cbGroup(C){let G,H,E=g("UL","dropdown-optgroup"),F=this;return"#"==C?E:(E.innerHTML=`<li class="optgroup-title"><b>${C}</b></li>`,this.con.multiple&&this.con.multiLimit==Infinity&&this.con.multiSelectAll&&(G=g("BUTTON","tail-none"),H=g("BUTTON","tail-all"),G.innerText=this.__.none,G.addEventListener("click",I=>{I.preventDefault(),this.options.all("unselect",I.target[q][q][x]("data-group"))}),H.innerText=this.__.all,H.addEventListener("click",I=>{I.preventDefault(),this.options.all("select",I.target[q][q][x]("data-group"))}),E.children[0].appendChild(G),E.children[0].appendChild(H)),E)},cbItem(C,D,E){let{value:F,selected:G,disabled:H}=C,I=g("LI","dropdown-option"+(G?" selected":"")+(H?" disabled":""));return E&&0<E.length&&this.con.searchMarked?I.innerHTML=F.replace(new RegExp("("+E+")","i"),"<mark>$1</mark>"):I.innerText=F,this.con.descriptions&&C.description&&(I.innerHTML+=`<span class="option-description">${C.description}</span>`),I},update(C){return this.updateLabel().updateContainer(C).updatePin(C).updateCSV(C)},updateLabel(C){if(this.container==this.label&&0<this.options.selected.length)return this.label[o](".label-inner")&&this.label.removeChild(this.label[o](".label-inner")),this.label[o](".label-count")&&this.label.removeChild(this.label[o](".label-count")),this;let F,D=this.con,E=this.options.selected.length;return"string"!=typeof C&&(D.disabled?C="disabled":0==this.dropdown[p]("*[data-key]").length?C="empty"+(this.select.classList.contains("in-search")?"Search":""):D.multiLimit<=E?C="limit":!D.multiple&&0<this.options.selected.length?C=this.options.selected[0].innerText:"string"==typeof D.placeholder?C=D.placeholder:C="placeholder"+(D.multiple&&D.multiLimit<Infinity?"Multi":"")),C=(this.__[C]||C).replace(":limit",D.multiLimit),C=`<span class="label-inner">${C}</span>`,F=D.multiShowLimit&&D.multiLimit<Infinity,D.multiple&&D.multiShowCount&&(C=`<span class="label-count">:c</span>\n${C}`,C=C.replace(":c",E+(F?" / "+D.multiLimit:""))),this.label.innerHTML=C,this},updateContainer(C){if(!this.container||!this.con.multiContainer)return this;let D=`[data-group='${C.group}'][data-key='${C.key}']`;if(this.container[o](D))return C.selected||this.container.removeChild(this.container[o](D)),this;if(C.selected){let E=g("DIV","select-handle");E.innerText=C.value,E[y]("data-key",C.key),E[y]("data-group",C.group),E.addEventListener("click",F=>{F.preventDefault(),F.stopPropagation(),this.options.unselect(F.target[x]("data-key"),F.target[x]("data-group"))}),this.container.appendChild(E)}return this},updatePin(C){let D=this.dropdown[o](".dropdown-inner ul");if(!this.con.multiPinSelected||!D||!1!==this._query)return this;if(option=this.dropdown[o](`li[data-key='${C.key}'][data-group='${C.group}']`),C.selected)D.insertBefore(option,D.children[0]);else{let E=this.dropdown[o](`ul[data-group='${C.group}']`),F=this.options[C.index-1],G=!1;for(;F&&F.group==C.group&&!(G=E[o](`li[data-key='${F.key}']`));)F=this.options[F.index-1];G&&G.nextElementSibling?E.insertBefore(option,G.nextElementSibling):E.appendChild(option)}return this},updateCSV(){if(!this.csvInput||!this.con.csvOutput)return this;let D=this.options.selected.map(E=>E.value);return this.csvInput.value=D.join(this.con.csvSeparator||","),this},open(C){if(/active|idle/.test(this.select.className)||this.con.disabled)return!1;this.calc();let D=function(){this.select.classList.add("active"),this.select.classList.remove("idle"),this.dropdown.style.height="auto",this.dropdown.style.overflow="visible",this.label[z]("style"),this.con.search&&this.con.searchFocus&&this.dropdown[o]("input").focus(),this.trigger.call(this,"open")},E=this,F=this.dropdown.style;if(this.con.animate&&!1!==C){this.label.style.zIndex=25,this.dropdown.style.cssText+="height:0;display:block;overflow:hidden;",this.select.classList.add("idle");let G=()=>{let H=parseInt(F.height,10),I=parseInt(F.maxHeight,10);return H>=I?D.call(E):void(F.height=(H+50>I?I:H+50)+"px",setTimeout(G,20))};G()}else F.cssText=`height:${F.maxHeight};display:block;overflow:hidden;`,D.call(this);return this},close(C){if(!this.select.classList.contains("active")||this.select.classList.contains("idle"))return!1;let D=function(){this.select.classList.remove("idle","active"),this.dropdown[z]("style"),this.dropdown[o](".dropdown-inner")[z]("style"),this.trigger.call(this,"close")},E=this,F=this.dropdown;if(this.con.animate&&!1!==C){this.select.classList.add("idle"),this.dropdown.style.overflow="hidden";let G=()=>{return 0>=parseInt(F.offsetHeight,10)-50?D.call(E):void(F.style.height=parseInt(F.offsetHeight,10)-50+"px",setTimeout(G,20))};G()}else D.call(this);return this},toggle(C){return this.select.classList.contains("active")?this.close(C):this.select.classList.contains("idle")?this:this.open(C)},remove(){return this.e[z]("data-tail-select"),this.e[t]("data-select-hidden")&&("0"==this.e[x]("data-select-hidden")&&this.e.style.removeProperty("display"),this.e[z]("data-select-hidden")),Array.from(this.e[p]("[data-select-option='add']"),C=>{C.parentElement.removeChild(C)}),Array.from(this.e[p]("[data-select-optgroup='add']"),C=>{C.parentElement.removeChild(C)}),this.e.name=this.csvInput.hasAttribute("name")?this.csvInput.name:this.e.name,this.select[q].removeChild(this.select),this.container&&Array.from(this.container[p](".select-handle"),C=>{C.parentElement.removeChild(C)}),this},reload(){return this.remove().init()},config(C,D){if(C instanceof Object){for(let F in C)this.config(F,C[F],!1);return this.reload()?this.con:this.con}return"undefined"==typeof C?this.con:!!(C in this.con)&&("undefined"==typeof D?this.con[C]:(this.con[C]=D,!1!==this.rebuild&&this.reload(),this))},enable(C){return this.select.classList.remove("disabled"),this.e.disabled=!1,this.con.disabled=!1,!1===C?this:this.reload()},disable(C){return this.select.classList.add("disabled"),this.e.disabled=!0,this.con.disabled=!0,!1===C?this:this.reload()},on(C,D,E){return 0>["open","close","change"].indexOf(C)||"function"!=typeof D?!1:(C in this.events||(this.events[C]=[]),this.events[C].push({cb:D,args:E instanceof Array?E:[]}),this)}},B=A.options=function(C,D){return this instanceof B?(this.self=D,this.element=C,this.length=0,this.selected=[],this.disabled=[],this.items={"#":{}},this.groups={},this):new B(C,D)},B.prototype={_r(C){return C.replace("disabled","disable").replace("enabled","enable").replace("selected","select").replace("unselected","unselect")},get(C,D){if("object"==typeof C&&C.key&&C.group)D=C.group||"#",C=C.key;else if(C instanceof Element)"OPTION"==C.tagName?(D=C[q].label||"#",C=C.value||C.innerText):C[t]("data-key")&&(D=C[x]("data-group")||C[q][x]("data-group")||"#",C=C[x]("data-key"));else{if("number"==typeof C)return this.get(this[C]);if("string"!=typeof C)return!1}return!!(D in this.items)&&this.items[D][C]},set(C,D){let E=C.value||C.innerText,F=C[q].label||"#";if(F in this.items||(this.items[F]={},this.groups[F]=C[q]),E in this.items[F])return!1;let G=this.self.con,H=!G.multiple&&0<this.selected.length;if((H||G.multiple&&this.selected.length>=G.multiLimit)&&(C.selected=!1),C.selected&&G.deselect&&(!C[t]("selected")||0==G.multiLimit)&&(C.selected=!1,C.parentElement.selectedIndex=-1),C[t]("data-description")){let I=g("SPAN");I.innerHTML=C[x]("data-description"),C[y]("data-description",I.innerHTML)}return this[this.length++]=this.items[F][E]={key:E,value:C.text,index:this.length-1,description:C[x]("data-description")||null,group:F,option:C,optgroup:"#"==F?void 0:this.groups[F],selected:C.selected,disabled:C.disabled},C.selected&&this.select(this.items[F][E]),C.disabled&&this.disable(this.items[F][E]),!D||this.self.callback(this[this.length-1],"rebuild")},add(C,D,E,F,G,H,I){if(C instanceof Object){for(let M in C){let{value:N,group:O,selected:P,disabled:Q,description:R}=C[M];this.add(C[M].key||M,N,O,P,Q,R,!1)}return this.self.query()}if(this.get(C,E))return!1;if(E="string"==typeof E?E:"#","#"!==E&&!(E in this.groups)){let M=g("OPTGROUP");M.label=E,M[y]("data-select-optgroup","add"),this.element.appendChild(M),this.items[E]={},this.groups[E]=M}let J=this.self.con,K=!J.multiple&&0<this.selected.length;(K||J.multiple&&this.selected.length>=J.multiLimit)&&(F=!1),G=!!G;let L=n.createElement("OPTION");return L.value=C,L.selected=F,L.disabled=G,L.innerText=D,L[y]("data-select-option","add"),H&&0<H.length&&L[y]("data-description",H),("#"==E?this.element:this.groups[E]).appendChild(L),this.set(L,I)},move(C,D,E,F){if(!(C=this.get(C,D)))return!1;if("#"!==E&&!(E in this.groups)){let G=g("OPTGROUP");G.label=E,this.element.appendChild(G),this.items[E]={},this.groups[E]=G,this.groups[E].appendChild(C.option)}return delete this.items[C.group][C.key],C.group=E,C.optgroup=this.groups[E]||void 0,this.items[E][C.key]=C,!F||this.self.query()},remove(C,D,E){return!!(C=this.get(C,D))&&(C.selected&&this.unselect(C),C.disabled&&this.enable(C),C.option[q].removeChild(C.option),Array.prototype.splice.call(this,C.index,1),delete this.items[C.group][C.key],0===Object.keys(this.items[C.group]).length&&(delete this.items[C.group],delete this.groups[C.group]),!E||this.self.query())},is(C,D,E){return(C=this._r(C),D=this.get(D,E),!D||0>["select","unselect","disable","enable"].indexOf(C))?null:"disable"==C||"enable"==C?"disable"==C?D.disabled:!D.disabled:("select"==C||"unselect"==C)&&("select"==C?D.selected:!D.selected)},handle(C,D,E,F){if(C=this._r(C),D=this.get(D,E),!D||0>["select","unselect","disable","enable"].indexOf(C))return null;if("disable"==C||"enable"==C)return D.option in this.disabled||"disable"!=C?D.option in this.disabled&&"enable"==C&&this.disabled.splice(this.disabled.indexOf(D.option),1):this.disabled.push(D.option),D.disabled="disable"==C,D.option.disabled="disable"==C,this.self.callback.call(this.self,D,C);let G=this.self.select.classList.contains("disabled")||D.disabled||D.option.disabled,H=this.self.con.multiple&&this.self.con.multiLimit<=this.selected.length,I=!this.self.con.multiple&&0<this.selected.indexOf(D.option),J=0==this.self.con.multiLimit&&!0==this.self.con.deselect,K=!this.self.con.multiple&&!this.self.con.deselect&&!0!==F;if("select"==C){if(G||H||J||I)return!1;if(!this.self.con.multiple)for(let L in this.selected)this.unselect(this.selected[L],void 0,!0);0>this.selected.indexOf(D.option)&&this.selected.push(D.option)}else if("unselect"==C){if(G||K)return!1;this.selected.splice(this.selected.indexOf(D.option),1)}return D.selected="select"==C,D.option.selected="select"==C,D.option[(6<C.length?"remove":"set")+"Attribute"]("selected","selected"),this.self.callback.call(this.self,D,C)},enable(C,D){return this.handle("enable",C,D)},disable(C,D){return this.handle("disable",C,D)},select(C,D){return this.handle("select",C,D)},unselect(C,D,E){return this.handle("unselect",C,D,E)},toggle(C,D){return!!(C=this.get(C,D))&&this.handle(C.selected?"unselect":"select",C,D)},invert(C){if(C=this._replaceType(C),0<=["enable","disable"].indexOf(C)){let E=this.disabled,F="enable"==C?"disable":"enable"}else if(0<=["select","unselect"].indexOf(C)){let E=this.selected,F="select"==C?"unselect":"select"}let D=Array.from(this).filter(E=>{!(E in invert)});return[].concat(invert).forEach(E=>{this.handle(action,E)}),[].concat(D).forEach(E=>{this.handle(C,E)}),!0},all(C,D){let E=this;return D in this.items?E=Object.keys(this.items[D]):0<=["unselect","enable"].indexOf(C)&&(E="unselect"==C?this.selected:this.disabled),[].concat(Array.from(E)).forEach(F=>{this.handle(C,F,D)}),!0},walk(C,D,E){if(D instanceof Array||D.length)for(var F=D.length,G=0;G<F;G++)this.handle.apply(this,[C,D[G],null].concat(E));else if(D instanceof Object)if(D.forEach)D.forEach(()=>{this.handle.apply(this,[C,value,null].concat(E))});else for(var H in D)("string"==typeof D[H]||"number"==typeof D[H]||D[H]instanceof Element)&&this.handle.apply(this,[C,D[H],H in this.items?H:null]).concat(E);return this},find(C,D){let E=new RegExp(C,"im"),F=[],G=I=>{return E.test(I.text||I.value)},H=I=>{return E.test(I.text)||E.test(I.value)||0<Array.apply(null,I.attributes).filter(G.length)};return Array.apply(null,this.self.e.options).map(I=>{return("any"==D?!!H(I):!!G(I))&&(0<=this.disabled.indexOf(I)&&!this.self.con.searchDisabled?!1:void F.push(this.get(I)))}),F},*finder(C,D){for(let F,E=this.find(C,D);void 0!==(F=E.shift());)yield F},*walker(C,D){let E=Object.keys(this.groups);"ASC"==D?E.sort():"DESC"==D?E.sort().reverse():"function"==typeof D&&(E=D.call(this,E)),E.unshift("#");for(let F=E.length,G=0;G<F;G++){let H=E[G],I=Object.keys(this.items[H]);"ASC"==C?I.sort():"DESC"==C?I.sort().reverse():"function"==typeof C&&(I=C.call(this,I));for(let J=I.length,K=0;K<J;K++)yield this.items[H][I[K]]}}},{select:A,options:B}}(window||this);export{select,options};
